
@{
    ViewBag.Title = "Post";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@using PagedList.Mvc
@model PagedList.IPagedList<UI_NewsManagementSystem.Models.Post>
<div class="row">
    <div class="col-lg-12">
        <h2 class="page-header">Danh sách bài viết</h2>
    </div>
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-sm-6">

                    </div>
                    <div class="col-sm-6" style="text-align:right">
                        <button class="btn btn-sm btn-danger" data-toggle="modal" data-target="#add-to-watch-list">Xóa&nbsp;<i class="fa fa-trash" aria-hidden="true"></i></button>
                    </div>
                </div>
            </div>
            <div class="panel-body">
                <div class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                    <div class="row">
                        <div class="col-sm-6">
                            <label>
                                Nhãn:
                                <select class="form-control input-sm">
                                    <option value="ALL">Tất cả</option>
                                    <option value="ANQG">An ninh quốc gia</option>
                                    <option value="ANTT">An ninh trật tự</option>
                                </select>
                                &nbsp;
                                Mức độ:
                                <select class="form-control input-sm">
                                    <option value="ALL">Tất cả</option>
                                    <option value="POS">Tích cực</option>
                                    <option value="NEU">Bình thường</option>
                                    <option value="NEG">Tiêu cực</option>
                                </select>
                                <a href="#"><input type="button" class="btn btn-sm btn-primary" value="OK" /></a>
                            </label>
                        </div>
                        <div class="col-sm-6">
                            <div id="dataTables-examble_filter" class="dataTables_filter">
                                <form>
                                    <label>
                                        Tìm kiếm:
                                        <input type="search" class="form-control input-sm" name="keyWord" required aria-controls="dataTables-example" />
                                        <button class="btn btn-sm btn-primary" type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>
                                    </label>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <table class="table table-striped table-bordered table-hover dataTable no-footer dtr-inline" id="dataTables-example" role="grid" aria-describedby="dataTables-example_info">
                            <thead>
                                <tr role="row">
                                    <th aria-controls="dataTables-example" rowspan="1" colspan="1" style="width: 30px">
                                        <input type="checkbox" id="select-all-post" class="checkbox" style="margin-bottom: 3px; cursor: pointer" />
                                    </th>
                                    <th aria-controls="dataTables-example" rowspan="1" colspan="1" style="width: 300px">URL bài viết</th>
                                    <th aria-controls="dataTables-example" rowspan="1" colspan="1" style="width: 500px">Nội dung</th>
                                    <th aria-controls="dataTables-example" rowspan="1" colspan="1" style="width: 150px">Ngày đăng</th>
                                    <th aria-controls="dataTables-example" rowspan="1" colspan="1" style="width: 250px">Người đăng</th>
                                    <th aria-controls="dataTables-example" rowspan="1" colspan="1" style="width: 140px; text-align: center">Nhãn</th>
                                    <th aria-controls="dataTables-example" rowspan="1" colspan="1" style="width: 150px; text-align: center">Mức độ</th>
                                    <th aria-controls="dataTables-example" rowspan="1" colspan="1" style="width: 60px; text-align: center">Xem</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr role="row">
                                        <td>                                          
                                            <input type="checkbox" id="@item.PostID" class="checkbox" style="margin-bottom: 3px; cursor: pointer" />
                                        </td>
                                        <td class="ellipsis">
                                            <span><a href="@item.PostUrl" target="_blank">@item.PostUrl</a></span>                                           
                                        </td>
                                        <td class="ellipsis"><span>@item.PostContent</span></td>
                                        <td>@item.UploadTime</td>
                                        <td class="ellipsis">
                                            <span><a href="@item.FacebookUrl" target="_blank">@item.FacebookName</a></span>
                                        </td>
                                        <td style="text-align: center">@item.NewsLabelName</td>
                                        @if (item.SentimentLabelID == "NEG")
                                        {
                                            <td style="text-align: center"><span class="label label-danger">@item.SentimentLabelName</span></td>
                                        }
                                        else if (item.SentimentLabelID == "POS")
                                        {
                                            <td style="text-align: center"><span class="label label-success">@item.SentimentLabelName</span></td>
                                        }
                                        else
                                        {
                                            <td style="text-align: center"><span class="label label-primary">@item.SentimentLabelName</span></td>
                                        }
                                        <td style="text-align: center">
                                            <button class="btn btn-sm btn-primary">
                                                <i class="fa fa-eye" aria-hidden="true"></i>
                                            </button>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <strong>Tổng cộng: @ViewBag.Count</strong>
                    </div>
                    <div class="col-sm-6">
                        <div class="dataTables_paginate paging_simple_numbers">
                            <ul class="pagination">
                                <li class="paginate_button active" aria-controls="dataTables-example" tabindex="0">
                                    @Html.PagedListPager(Model, pageIndex => Url.Action("Post", "Home", new { pageIndex }))
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $('#select-all-post').click(function (e) {
        var table = $(e.target).closest('table');
        $('td input:checkbox', table).prop('checked', this.checked);
    });
</script>